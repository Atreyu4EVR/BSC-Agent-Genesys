<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>n8n Chat Demo - Genesys Cloud Simulation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 16px;
        }

        .demo-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .demo-section h2 {
            color: #333;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .iframe-container {
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .iframe-header {
            background: #333;
            color: white;
            padding: 10px 15px;
            font-size: 14px;
            font-weight: 500;
        }

        .iframe-content {
            height: 600px;
            position: relative;
        }

        .chat-iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .demo-grid {
                grid-template-columns: 1fr;
            }
        }

        .info-box {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }

        .info-box h3 {
            margin-top: 0;
            color: #0c5460;
        }

        .info-box p {
            margin-bottom: 0;
            color: #0c5460;
            font-size: 14px;
        }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }

        .warning-box h3 {
            margin-top: 0;
            color: #856404;
        }

        .warning-box p {
            margin-bottom: 0;
            color: #856404;
            font-size: 14px;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 12px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 5px;
            font-size: 14px;
        }

        .button:hover {
            background-color: #0056b3;
        }

        .button.secondary {
            background-color: #6c757d;
        }

        .button.secondary:hover {
            background-color: #545b62;
        }

        .console-output {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin: 15px 0;
        }

        .event-log {
            border: 1px solid #ddd;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
            background: white;
        }

        .event-item {
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
            font-size: 13px;
        }

        .event-item:last-child {
            border-bottom: none;
        }

        .event-time {
            color: #666;
            font-size: 11px;
        }

        .event-type {
            font-weight: bold;
            color: #007bff;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ n8n Chat UI Demo</h1>
            <p>Simulating Genesys Cloud iframe integration</p>
        </div>

        <div class="warning-box">
            <h3>‚ö†Ô∏è Configuration Required</h3>
            <p>Before testing, make sure to update the webhook URL in <code>config.js</code> with your actual n8n
                webhook endpoint.</p>
        </div>

        <div class="demo-section">
            <h2>üì± Chat Interface Preview</h2>
            <p>This shows how the chat interface will appear when embedded in Genesys Cloud:</p>

            <div class="demo-grid">
                <div>
                    <div class="iframe-container">
                        <div class="iframe-header">
                            üñ•Ô∏è Desktop View (400√ó600px)
                        </div>
                        <div class="iframe-content">
                            <iframe id="chat-iframe-desktop" src="chat.html" class="chat-iframe">
                            </iframe>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="iframe-container">
                        <div class="iframe-header">
                            üì± Mobile View (320√ó500px)
                        </div>
                        <div class="iframe-content" style="height: 500px;">
                            <iframe id="chat-iframe-mobile" src="chat.html" class="chat-iframe"
                                style="width: 320px; margin: 0 auto; display: block;">
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>üîÑ Event Communication</h2>
            <p>This section shows real-time communication between the chat iframe and the parent window (simulating
                Genesys Cloud):</p>

            <div id="event-log" class="event-log">
                <div class="event-item">
                    <div class="event-time">Waiting for events...</div>
                </div>
            </div>

            <div style="margin-top: 15px;">
                <button class="button" onclick="pingChat()">üì° Ping Chat</button>
                <button class="button secondary" onclick="getStatus()">üìä Get Status</button>
                <button class="button secondary" onclick="clearLog()">üóëÔ∏è Clear Log</button>
            </div>
        </div>

        <div class="demo-section">
            <h2>üõ†Ô∏è Testing URLs</h2>
            <p>Test different configurations and setups:</p>

            <div class="info-box">
                <h3>Available Test URLs</h3>
                <div style="margin: 10px 0;">
                    <a href="index.html" target="_blank" class="button">Simple Implementation</a>
                    <a href="chat.html" target="_blank" class="button">Enhanced Implementation</a>
                    <a href="chat.html?debug=true" target="_blank" class="button secondary">Debug Mode</a>
                </div>
            </div>

            <h3>Custom Webhook URL Testing</h3>
            <p>Test with a custom webhook URL (useful for development):</p>
            <div class="code-block">
                chat.html?webhookUrl=https://byui.app.n8n.cloud/webhook/13348d82-88d3-447e-90d4-7b6db9f79280/chat
            </div>
        </div>

        <div class="demo-section">
            <h2>üìã Genesys Cloud Integration Code</h2>
            <p>Use this code in your Genesys Cloud client application to integrate with the chat widget:</p>

            <div class="code-block">
                // Listen for chat events
                window.addEventListener('message', function(event) {
                const { data } = event;

                if (data && data.type && data.type.startsWith('n8nChat_')) {
                console.log('Chat Event:', data.type, data.data);

                switch (data.type) {
                case 'n8nChat_chatReady':
                console.log('Chat is ready for use');
                break;
                case 'n8nChat_messageReceived':
                console.log('New message from chat:', data.data);
                break;
                case 'n8nChat_chatError':
                console.error('Chat error:', data.data);
                break;
                }
                }
                });

                // Send configuration to chat
                function updateChatConfig(config) {
                const iframe = document.getElementById('chat-iframe');
                iframe.contentWindow.postMessage({
                type: 'updateConfig',
                config: config
                }, '*');
                }
            </div>
        </div>

        <div class="demo-section">
            <h2>üîß Configuration Examples</h2>

            <h3>Basic Configuration</h3>
            <div class="code-block">
                {
                "webhookUrl": "https://byui.app.n8n.cloud/webhook/13348d82-88d3-447e-90d4-7b6db9f79280/chat",
                "mode": "fullscreen",
                "showWelcomeScreen": true,
                "initialMessages": [
                "Hello! Welcome to our support chat.",
                "How can I help you today?"
                ]
                }
            </div>

            <h3>Custom Styling</h3>
            <div class="code-block">
                {
                "customStyles": {
                "--chat--color-primary": "#ff6b35",
                "--chat--color-secondary": "#004e89",
                "--chat--header--background": "#1a1a2e",
                "--chat--message--font-size": "14px"
                }
                }
            </div>
        </div>
    </div>

    <script>
        // Event logging functionality
        let eventCount = 0;

        function logEvent(type, data = {}) {
            eventCount++;
            const eventLog = document.getElementById('event-log');
            const timestamp = new Date().toLocaleTimeString();

            const eventItem = document.createElement('div');
            eventItem.className = 'event-item';
            eventItem.innerHTML = `
                <div class="event-time">[${timestamp}] Event #${eventCount}</div>
                <div class="event-type">${type}</div>
                <div style="color: #666; font-size: 12px; margin-top: 4px;">${JSON.stringify(data, null, 2)}</div>
            `;

            eventLog.insertBefore(eventItem, eventLog.firstChild);

            // Keep only last 20 events
            while (eventLog.children.length > 20) {
                eventLog.removeChild(eventLog.lastChild);
            }
        }

        // Listen for messages from chat iframes
        window.addEventListener('message', function (event) {
            const { data } = event;

            if (data && data.type && data.type.startsWith('n8nChat_')) {
                logEvent(data.type, data.data || {});
            }
        });

        // Demo functions
        function pingChat() {
            const iframes = document.querySelectorAll('.chat-iframe');
            iframes.forEach(iframe => {
                iframe.contentWindow.postMessage({
                    type: 'ping',
                    timestamp: new Date().toISOString()
                }, '*');
            });
            logEvent('ping_sent', { timestamp: new Date().toISOString() });
        }

        function getStatus() {
            const iframes = document.querySelectorAll('.chat-iframe');
            iframes.forEach(iframe => {
                iframe.contentWindow.postMessage({
                    type: 'getStatus'
                }, '*');
            });
            logEvent('status_requested', {});
        }

        function clearLog() {
            const eventLog = document.getElementById('event-log');
            eventLog.innerHTML = '<div class="event-item"><div class="event-time">Log cleared</div></div>';
            eventCount = 0;
        }

        // Initialize demo
        document.addEventListener('DOMContentLoaded', function () {
            logEvent('demo_initialized', {
                userAgent: navigator.userAgent,
                timestamp: new Date().toISOString()
            });

            // Add load event listeners to iframes
            document.querySelectorAll('.chat-iframe').forEach((iframe, index) => {
                iframe.addEventListener('load', function () {
                    logEvent('iframe_loaded', { index: index });
                });
            });
        });
    </script>
</body>

</html>